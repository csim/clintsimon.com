<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>
        Google's new App Engine pricing - csim
    </title>
    <!-- generated 2013-10-30T18:59:28+01:00 -->

    <link rel="icon" href="/favicon.ico">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="http://lh3.googleusercontent.com/-Ea8xoWWt_P8/ToKxKe5jkjI/AAAAAAAAC24/4pXdtIm0k7E/techhike_favicon.png" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Clint Simon">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="google-site-verification" content="9122UHrLTdTksyNCp_xG5dypMZu2evQmgwu43GVHjOo" />

    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Ubuntu+Condensed|Orbitron:400" rel="stylesheet" type="text/css" />

    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/base.css" rel="stylesheet">
</head>

<body>

    <div id="masthead">
        <div id="masthead-inner">
            <a class="title" href="/">csim</a>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="span9 content">
              <a name="/2011/09/29/Googles-new-App-Engine-pricing"></a>
<h1><a href="/2011/09/29/Googles-new-App-Engine-pricing">Google's new App Engine pricing</a></h1>
<div class="post-date">29 September 2011</div>

<p>Google App engine is in the process of changing it&#39;s pricing model. At present this new pricing model goes into effect on December 1, 2011. There has been quite an uproar among App engine developers. In some cases the new billing model raises monthly costs by more than 300%. This has cause quite a reaction among the community and the backlash is very real</p>

<h3>What is changing?</h3>

<p>The primary change is that Google is moving from a model where you are charged by CPU time to a model where you are charged by &quot;instance time&quot;. This means that google charges are not necessarily based on pure CPU use but rather on the amount of instances of your application the Google scheduler decides to run. To magnify matters, most web applications are IO bound and the current version of Python supported by App Engine is single threaded. </p>

<p>That means that your application is probably using more instances that you think. Because one instance can only handle a fixed amount of traffic based on IO and threading, the scheduler is forced to create instances more often for Python applications. All of these circumstances add up to a much higher cost for developers.</p>

<p>Google has added sliders that allow you to tweak the scheduler behavior. You can now change the maximum number of idle instances and the minimum pending wait time. This allow us to dictate how long is a acceptable waiting time per request and how many instances show be available for traffic spikes. </p>

<p>I&#39;m personally glad these are available, although others disagree. I have found them to be helpful for my small(ish) application because latency is not a concern, so I can set the min latency up to around 700ms. This means that requests can wait to be served from an <em>existing</em> instance. Basically all output from my application is cached, so my request processing time is under 100ms. Setting the min pending latency to 700ms basically means that my application can remain free. I like free.</p>

<p>It appears as though CPU billing was a bad idea in the first place and Google is now correcting for this by changing to instance based billing. In the end, Google needs to pay for the physical resources an application uses and as it turns out web applications use very little CPU as compared to IO with the datastore or other APIs. </p>

<p>So, is the dream of a true &quot;Platform as a Service&quot; dead? Yes and No. The precise billing aspect of PaaS is dead at Google for the moment, but App Engine (and PaaS for that matter) is not defined by this shortcoming. Ultimately Google has recognized that having an instance running costs money even if the CPU usage for that instance is zero. Said another way, memory costs money. An instance will always consume memory if it is running. And not only will it consume memory but Google will need to reserve all the memory that it <em>may</em> need. This is a reality of physics.</p>

<p>I think we have become a little spoiled in that we have come to expect that computing will always become cheaper over time. I wonder how much it would cost to build your own ultra scalable, redundant, highly replicated system?</p>

<h3>Optimization</h3>

<p>In the new world of App Engine where instances are charged, the emphasis is now on eliminating IO bound activities. That means eliminate datastore calls, URL fetch call, etc. If you have instances that are waiting around for IO activities to complete, then you are running to many instances.</p>

<p>Here are a few ideas:</p>

<ul>
<li>Don&#39;t pull more data than you need for the data store. Use &quot;Select <em>key</em>&quot; where possible. Limit your fetches to the smallest possible row sets.</li>
<li>Cache results when ever possible. If you are displaying the same data, then cache it per page, per user or per application.</li>
<li>Use a Task Queue. Can this operation run in the background? Task queues can eliminate instances by way of pushing work for a dedicated backend.</li>
</ul>

<h3>The good news...</h3>

<p>App Engine was not decommissioned. I know this sounds like little consolation, but many Google projects have been scrapped over the past 6 months and App Engine is not one of them. This shows that Google is willing to make difficult decisions when it comes to App Engine and that they are committed to having a PaaS offering for the long term. </p>

<p>The bottom line is that Google has a right to at least break even on App Engine. The service is incredible, the free tier still exists and the new <a href="http://code.google.com/appengine/sla.html">SLA terms</a> are top notch. App Engine is still a worth competitor in the PaaS market, even with the new pricing.</p>

	
<div class="post-separator"></div>


          </div>

          <div class="span3 sidebar">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                    <li><a href="/about/">About</a></li>
                    <li><a href="/archive/">Archive</a></li>
                    <li><a href="/topics/">Topics</a></li>
                </ul>
                <div class="social-icons">
                    <a href="http://www.facebook.com/techhike">
                        <img src="/images/facebook.png" style="width: 30px;" alt="Facebook" /></a>
                        <a href="http://www.twitter.com/clintsim">
                            <img src="/images/twitter.png" style="width: 30px;" alt="Twitter" /></a>
                            <br />
                            <a href="http://www.linkedin.com/profile/view?id=2238939&amp;trk=tab_pro">
                                <img src="/images/linkedin.png" style="width: 30px;" alt="Linkedin" /></a>
                                <a href="http://github.com/csim">
                                    <img src="/images/github.png" style="width: 30px;" alt="GitHub" /></a>
                                    <br />
                                    <a href="/feed.xml"><img src="/images/rss.gif" style="width: 29px; height: 31px;" alt="Feed" /></a>
                                </div>
                    <!--<a class="twitter-timeline" href="https://twitter.com/TechHike" data-widget-id="250295447481098241">Tweets by @@TechHike</a>
                    <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>-->

                </div>
            </div>

        </div>

    </div>


    <script src="//code.jquery.com/jquery-1.6.2.min.js"></script>
    <script src="/base.js"></script>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25860409-1']);
        _gaq.push(['_setDomainName', 'techhike.net']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

</body>
</html>
